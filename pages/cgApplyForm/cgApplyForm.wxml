<view>
  <view class="cg-apply-form">
    <view>
      <form class="common-form" report-submit="false" bindsubmit="" bindreset="">
        <view class="form-item">
          <view class="label">编号：</view>
          <view class="value">A12342345</view>
        </view>
        <view class="form-item">
          <view class="label">申请人：</view>
          <view class="value">dfvgsvdf</view>
        </view>
        <view class="form-item">
          <view class="label">申请时间：</view>
          <view class="value">2020-12-17 23:21</view>
        </view>
        <picker bindchange="bindPickerChange" value="{{catagoryIndex}}" range="{{pickerOption}}">
          <view class="picker-view form-item">
            <view class="label">仓库：</view>
            <view class="value picker-view-label">{{pickerOption[catagoryIndex]}}</view>
          </view>
        </picker>
        <view class="form-item">
          <view class="label">申请物料：</view>
          <van-icon class="value add-btn" name="plus" bindtap="showDialog" />
        </view>
      </form>
      <view class="table">
        <view class="tr bg-w">
          <view class="th">物料编码</view>
          <view class="th">物料名</view>
          <view class="th ">规格</view>
          <view class="th ">单位</view>
          <view class="th ">数量</view>
        </view>
        <block wx:for="{{detail.productList}}" wx:key="productId">
          <view class="tr">
            <view class="td">{{item.productId}}</view>
            <view class="td">{{item.productName}}</view>
            <view class="td"></view>
            <view class="td">{{item.unit}}</view>
            <view class="td">{{item.amount}}</view>
          </view>
        </block>
      </view>
    </view>

    <button class="fixed-bottom-btn footer-btn" bindtap="goToForm">提交</button>
  </view>

  <!-- 添加采购物料弹框 -->
  <wux-popup closable maskClosable="{{false}}" visible="{{ dialogVisible }}" title="添加采购物料" bind:close="onClose"
    wux-header-class="dialog-header" wux-body-class="dialog-content" wux-footer-class="dialog-add-btn">
    <form class="common-form">
      <picker bindchange="bindPickerChange" value="{{productIndex}}" range="{{productOption}}">
        <view class="form-item picker-view">
          <view class="label">选择物料：</view>
          <view class="value picker-view-label">{{pickerOption[productIndex]}}</view>
        </view>
      </picker>
      <view class="form-item">
        <view class="label">数量：</view>
        <view class="weui-cell weui-cell_input">
          <input class="weui-input input" maxlength="10" placeholder="请输入数量" type="number" />
        </view>
      </view>
    </form>
    <view slot="footer" class="popup__button" bindtap="addRecord">添加</view>
  </wux-popup>

</view>